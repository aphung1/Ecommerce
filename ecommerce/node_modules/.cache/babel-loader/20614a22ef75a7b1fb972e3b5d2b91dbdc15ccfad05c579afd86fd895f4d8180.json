{"ast":null,"code":"export const initialState = {\n  basket: [],\n  user: null,\n  basket_count: 0\n};\n\n// Selector\nexport const getBasketTotal = basket => basket === null || basket === void 0 ? void 0 : basket.reduce((amount, item) => Number(item.price) * item.quantity + amount, 0);\nconst reducer = (state, action) => {\n  console.log(state.basket);\n  switch (action.type) {\n    case \"ADD_TO_BASKET\":\n      const index = state.basket.findIndex(product => product.id == action.item.id);\n      if (index == -1) {\n        return {\n          ...state,\n          basket: [...state.basket, action.item],\n          basket_count: state.basket_count + 1\n        };\n      } else {\n        const newBasket = [...state.basket];\n        newBasket[index] = {\n          ...newBasket[index],\n          quantity: newBasket[index].quantity + 1\n        };\n        return {\n          ...state,\n          basket: newBasket,\n          basket_count: state.basket_count + 1\n        };\n      }\n    case \"CHANGE_ITEM_QUANTITY\":\n      const productIndex = state.basket.findIndex(product => product.id == action.item.id);\n      if (productIndex == -1) {\n        return state;\n      } else {\n        const newBasket = [...state.basket];\n        if (action.item.quantity == 0) {\n          newBasket.splice(productIndex, 1);\n        }\n        newBasket[index] = {\n          ...newBasket[index],\n          quantity: action.item.quantity\n        };\n        return {\n          ...state,\n          basket: newBasket,\n          basket_count: state.basket_count + 1\n        };\n      }\n    default:\n      console.log(\"defualt\");\n      return state;\n  }\n};\nexport default reducer;","map":{"version":3,"names":["initialState","basket","user","basket_count","getBasketTotal","reduce","amount","item","Number","price","quantity","reducer","state","action","console","log","type","index","findIndex","product","id","newBasket","productIndex","splice"],"sources":["/Users/annaphung/Documents/Ecommerce/ecommerce/src/reducer.js"],"sourcesContent":["export const initialState = {\n    basket: [],\n    user: null,\n    basket_count: 0\n  };\n  \n  // Selector\n  export const getBasketTotal = (basket) => \n    basket?.reduce((amount, item) => Number(item.price) * item.quantity + amount, 0);\n\n  \n\n  const reducer = (state, action) => {\n    console.log(state.basket)\n    switch (action.type) {\n        case \"ADD_TO_BASKET\":\n            const index = state.basket.findIndex((product) => product.id==action.item.id);\n            if (index == -1) {\n              return {...state, basket: [...state.basket, action.item], basket_count: state.basket_count+1}\n            } else {\n              const newBasket = [...state.basket];\n              newBasket[index] = {...newBasket[index], quantity: newBasket[index].quantity+1}\n              return {...state, basket: newBasket, basket_count: state.basket_count+1}\n            }\n        case \"CHANGE_ITEM_QUANTITY\":\n          const productIndex = state.basket.findIndex((product) => product.id==action.item.id);\n          if (productIndex == -1) {\n            return state\n          } else {\n            const newBasket = [...state.basket];\n            if (action.item.quantity == 0) {\n              newBasket.splice(productIndex, 1);\n            }\n            newBasket[index] = {...newBasket[index], quantity: action.item.quantity}\n            return {...state, basket: newBasket, basket_count: state.basket_count+1}\n          }\n      default:\n        console.log(\"defualt\")\n        return state;\n    }\n  };\n  \n  export default reducer;"],"mappings":"AAAA,OAAO,MAAMA,YAAY,GAAG;EACxBC,MAAM,EAAE,EAAE;EACVC,IAAI,EAAE,IAAI;EACVC,YAAY,EAAE;AAChB,CAAC;;AAED;AACA,OAAO,MAAMC,cAAc,GAAIH,MAAM,IACnCA,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEI,MAAM,CAAC,CAACC,MAAM,EAAEC,IAAI,KAAKC,MAAM,CAACD,IAAI,CAACE,KAAK,CAAC,GAAGF,IAAI,CAACG,QAAQ,GAAGJ,MAAM,EAAE,CAAC,CAAC;AAIlF,MAAMK,OAAO,GAAG,CAACC,KAAK,EAAEC,MAAM,KAAK;EACjCC,OAAO,CAACC,GAAG,CAACH,KAAK,CAACX,MAAM,CAAC;EACzB,QAAQY,MAAM,CAACG,IAAI;IACf,KAAK,eAAe;MAChB,MAAMC,KAAK,GAAGL,KAAK,CAACX,MAAM,CAACiB,SAAS,CAAEC,OAAO,IAAKA,OAAO,CAACC,EAAE,IAAEP,MAAM,CAACN,IAAI,CAACa,EAAE,CAAC;MAC7E,IAAIH,KAAK,IAAI,CAAC,CAAC,EAAE;QACf,OAAO;UAAC,GAAGL,KAAK;UAAEX,MAAM,EAAE,CAAC,GAAGW,KAAK,CAACX,MAAM,EAAEY,MAAM,CAACN,IAAI,CAAC;UAAEJ,YAAY,EAAES,KAAK,CAACT,YAAY,GAAC;QAAC,CAAC;MAC/F,CAAC,MAAM;QACL,MAAMkB,SAAS,GAAG,CAAC,GAAGT,KAAK,CAACX,MAAM,CAAC;QACnCoB,SAAS,CAACJ,KAAK,CAAC,GAAG;UAAC,GAAGI,SAAS,CAACJ,KAAK,CAAC;UAAEP,QAAQ,EAAEW,SAAS,CAACJ,KAAK,CAAC,CAACP,QAAQ,GAAC;QAAC,CAAC;QAC/E,OAAO;UAAC,GAAGE,KAAK;UAAEX,MAAM,EAAEoB,SAAS;UAAElB,YAAY,EAAES,KAAK,CAACT,YAAY,GAAC;QAAC,CAAC;MAC1E;IACJ,KAAK,sBAAsB;MACzB,MAAMmB,YAAY,GAAGV,KAAK,CAACX,MAAM,CAACiB,SAAS,CAAEC,OAAO,IAAKA,OAAO,CAACC,EAAE,IAAEP,MAAM,CAACN,IAAI,CAACa,EAAE,CAAC;MACpF,IAAIE,YAAY,IAAI,CAAC,CAAC,EAAE;QACtB,OAAOV,KAAK;MACd,CAAC,MAAM;QACL,MAAMS,SAAS,GAAG,CAAC,GAAGT,KAAK,CAACX,MAAM,CAAC;QACnC,IAAIY,MAAM,CAACN,IAAI,CAACG,QAAQ,IAAI,CAAC,EAAE;UAC7BW,SAAS,CAACE,MAAM,CAACD,YAAY,EAAE,CAAC,CAAC;QACnC;QACAD,SAAS,CAACJ,KAAK,CAAC,GAAG;UAAC,GAAGI,SAAS,CAACJ,KAAK,CAAC;UAAEP,QAAQ,EAAEG,MAAM,CAACN,IAAI,CAACG;QAAQ,CAAC;QACxE,OAAO;UAAC,GAAGE,KAAK;UAAEX,MAAM,EAAEoB,SAAS;UAAElB,YAAY,EAAES,KAAK,CAACT,YAAY,GAAC;QAAC,CAAC;MAC1E;IACJ;MACEW,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;MACtB,OAAOH,KAAK;EAAC;AAEnB,CAAC;AAED,eAAeD,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}